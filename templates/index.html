{% extends "base.html" %} {% block title %}Discover · winter{% endblock %} {%
block content %}

<section class="hero mb-4">
  <div class="row align-items-center g-3">
    <div class="col-lg-7">
      <h1 class="mb-2">Find something you’ll love</h1>
      <p class="mb-3 text-secondary">
        Search by category or style. Plural/singular terms like “dress /
        dresses” match the same results.
      </p>
      <form class="d-flex" action="{{ url_for('index') }}">
        <input
          class="form-control me-2"
          name="q"
          placeholder="E.g., summer dress, classic jeans, tops…"
          value="{{ q|default('') }}"
        />
        <button class="btn btn-primary px-4">Search</button>
      </form>
      {% if q %}
      <div class="mt-2 small text-secondary">
        Found <span class="badge-soft">{{ count }}</span> item(s) for “{{ q }}”.
      </div>
      {% endif %}
    </div>
    <div class="col-lg-5">
      <div class="p-3 p-lg-4">
        <span class="badge-soft">Smart search</span>
        <div class="mt-2 text-secondary">
          We normalize simple plurals so similar words match.<br />
          Try <em>“skirt”</em> vs <em>“skirts”</em>.
        </div>
      </div>
    </div>
  </div>
</section>

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
  {% for it in items %}
  <div class="col">
    <div class="card h-100">
      <img
        class="item-img"
        src="https://picsum.photos/seed/{{ it.id }}/600/400"
        alt="{{ it.title }}"
        data-fallback="{{ url_for('static', filename='placeholder.jpg') }}"
        onerror="this.onerror=null; this.src=this.dataset.fallback;"
      />
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-start">
          <h5 class="card-title me-2">{{ it.title }}</h5>
          {% if it.class_name %}<span class="badge-soft"
            >{{ it.class_name }}</span
          >{% endif %}
        </div>
        <div class="small text-secondary mb-2">{{ it.department_name }}</div>
        <p class="card-text">
          {{ (it.description or '')[:140] }}{% if (it.description or '')|length
          > 140 %}…{% endif %}
        </p>
        <a
          class="btn btn-outline-primary btn-sm"
          href="{{ url_for('item_detail', item_id=it.id) }}"
        >
          <i class="bi bi-bag-heart me-1"></i> View item
        </a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

{% endblock %}
